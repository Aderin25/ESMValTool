---
# Notes on ncl-cdo-R packages relation: cdo=1.9.6
# implies the use of R packages from the r channel
# and those packages are R=3.2.2 << 3.5.1 and are
# obsolete (installing ncl=6.5.0/6.6.2 automatically
# removes the conda-forge-installed R (3.5.1) packages.

name: esmvaltool
channels:
  - conda-forge

dependencies:
  # Python packages that cannot be installed from PyPI:
  - gxx_linux-64  # needed since conda uses internal compiler which is empty 
  - iris
  - matplotlib<3  # Can be installed from PyPI, but is a dependency of iris and should be pinned.
  - python-stratify
  - esmpy
  - xarray  # Can be installed from PyPI, but here to get a consistent set of depencies with iris.
  # Non-Python dependencies
  - graphviz
  - cdo
  # - gtk2=2.24.31=hde048ef_0 # works with r-base=3.5.1=he45234b_1005

  # Multi language support:
  - ncl  # doesn't work with gtk for ncl<6.6 and r-base for ncl>=6.6
  - jasper!=1.900.31  # pinned NCL dependency
   # - r-base=3.5.1=he45234b_1005  # works with gtk2=2.24.31=hde048ef_0
  - libunwind  # Needed for Python3.7+
  # TODO: add julia
