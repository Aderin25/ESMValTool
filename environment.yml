---
# as of 12 March 2019 cdo=1.9.6 and ncl=6.6.2 (latest versions
# for each) are working well; installing ncl(>=6.5.0) will
# automatically remove r-base (>=3.4.x) beacuse gtk2=2.24.31
# and ncl are in conflict with r-base; compatibility between gtk2
# and r-base is limited to only gtk2=2.24.31=hde048ef_0 and
# r-base=3.5.1=he45234b_1005 but that gtk2 hash has conflict with
# all ncl versions because of *[track_features=blas_openblas].

name: esmvaltool
channels:
  - conda-forge

dependencies:
  # Python packages that cannot be installed from PyPI:
  - gxx_linux-64  # needed since conda uses internal compiler which is empty by default
  - iris
  - matplotlib<3  # Can be installed from PyPI, but is a dependency of iris and should be pinned.
  - python-stratify
  - esmpy
  - xarray  # Can be installed from PyPI, but here to get a consistent set of depencies with iris.
  # Non-Python dependencies
  - graphviz
  - cdo

  # Multi language support:
  - ncl
  - jasper!=1.900.31  # pinned NCL dependency
  - libunwind  # Needed for Python3.7+
  # TODO: add julia
