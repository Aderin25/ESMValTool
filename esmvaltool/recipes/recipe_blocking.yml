documentation:

  description: |
    Compute blocking index (1D and 2D)

  authors:
    - atha_pa
    - schi_re

  references:
    - contact_authors

  projects:
    - primavera

datasets:
  - {dataset: GFDL-ESM2M,
     project: CMIP5, exp: historical,  ensemble: r1i1p1,
     start_year: 1950,  end_year: 2000}
  - {dataset: MPI-ESM-LR,
     project: CMIP5, exp: historical,  ensemble: r1i1p1,
     start_year: 1950,  end_year: 2000}
  - {dataset: HadGEM2-CC,
     project: CMIP5,  exp: historical,  ensemble: r1i1p1,
     start_year: 1950,  end_year: 2000}

preprocessors:
  extract:
    extract_levels:
      levels: [50000,]
      scheme: nearest
    extract_region:
      start_longitude: 0
      end_longitude: 360
      start_latitude: 20
      end_latitude: 90
    save:
      optimize_access: longitude time

diagnostics:
  blocking:
    description: Blocking
    variables:
      zg:
        reference_dataset: GFDL-ESM2M
        mip: day
        field: T2M
        preprocessor: extract
    scripts:
#      blocking1D:
#        script: blocking/blocking.py
#        title: "Blocking diagnostic 1D"
#        compute_2d: False
#        compute_1d: True
#        central_latitude: 60.0
#        span: 20.0
#        offset: 5.0
#        north_threshold: -10.0
#        south_threshold: 0.0
#        smoothing_window: 5
#        max_color_scale: 10

      blocking2D:
        script: blocking/blocking.py
        title: "Blocking diagnostic 2D"
        compute_2d: True
        compute_1d: False
        span: 15.0
        north_threshold: -10.0
        south_threshold: 0.0
        persistence: 5
        max_color_scale: 10
