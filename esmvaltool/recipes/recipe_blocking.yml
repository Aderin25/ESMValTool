datasets:
  - {dataset: EC-Earth3-HR, expid: a0xi, institute: EC-Earth-Consortium, grid: gr,
     project: PRIMAVERA, exp: piControl,  ensemble: r1i1p1f1, version: v20180308,
     start_year: 1950,  end_year: 1955}
#  - {dataset: EC-Earth3-HR, expid: a0xi, institute: EC-Earth-Consortium, grid: gr,
#     project: PRIMAVERA, exp: piControl,  ensemble: r1i1p1f1, version: v20180308,
#     start_year: 1951,  end_year: 1951}
#  - {dataset: ERA-Interim,  project: OBS,  type: reanaly,  version: 1,
#     start_year: 1980, end_year: 1980,  tier: 3, cmor_table: CMIP6}
preprocessors:
  extract:
    extract_levels:
      levels: [50000,]
      scheme: nearest
    extract_region:
      long1: 0
      long2: 360
      lat1: 20
      lat2: 90
    save:
      optimize_access: timeseries

  regrid:
    regrid:
      target_grid: 2.5x2.5
      scheme: linear
    extract_levels:
      levels: [50000,]
      scheme: nearest
    extract_region:
      long1: 0
      long2: 360
      lat1: 30
      lat2: 90

diagnostics:
  blocking:
    description: Blocking
    variables:
      zg:
        reference_dataset: ERA-Interim
        mip: day
        field: T2M
        preprocessor: extract
    scripts:
      blocking1D:
        script: blocking/blocking.py
        title: "Blocking diagnostic"
        compute_2d: False
        compute_1d: True
        central_latitude: 60.0
        span: 20.0
        offset: 5.0
        north_threshold: -10.0
        south_threshold: 0.0
        smoothing_window: 3
        max_color_scale: 10

      blocking2D:
        script: blocking/blocking.py
        title: "Blocking diagnostic"
        compute_2d: True
        compute_1d: False
        span: 15.0
        north_threshold: -10.0
        south_threshold: 0.0
        persistence: 5
        max_color_scale: 10
#        months: [1,2]

#  regridded_blocking:
#    description: Blocking
#    variables:
#      zg:
#        reference_dataset: ERA-Interim
#        mip: day
#        field: T2M
#        preprocessor: regrid
#    scripts:
#      blocking:
#        script: blocking/blocking.py
#        title: "Blocking diagnostic"
#        central_latitude: 60.0
#        span: 20.0
#        offset: 5.0
#        north_threshold: -10.0
#        south_threshold: 0.0
##        months: [1,2]
#        smoothing_window: 3
#        max_color_scale: 10
