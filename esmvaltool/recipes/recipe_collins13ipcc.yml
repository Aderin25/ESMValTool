###############################################################################
# recipe_collins13ipcc.yml

---
documentation:
  description: | 
    Reproducing selected figures from IPCC AR5, chap. 12 (Collins et al., 2013)

  authors:
   - lore_ru

  references:
   - collins13ipcc

  projects:
    - crescendo

preprocessors:
  preprocessor_1:
    regrid: false
    mask_landsea: false
    multi_model_statistics: false

  preproc_map:
    regrid:
      target_grid: 1x1
      scheme: linear
    mask_landsea: false
    multi_model_statistics: false

  preproc_map_land:
    mask_landsea:
      mask_out: sea
#    mask_landseaice:
#      mask_out: ice
    regrid:
      target_grid: 1x1
      scheme: linear
    multi_model_statistics: false

  preproc_zo:
    regrid:
      target_grid: 1x1
      scheme: linear
    extract_levels:
      levels: reference_dataset
      scheme: linear
    mask_landsea: false
    multi_model_statistics: false

diagnostics:

###  Mean variable change in one RCP for individual models ###
  tas_change_all_models:
    description: Air temperature change for RCP45 for all models as maps.
                 Needs historical and scenario run for each model to be plotted.
    themes:
      - phys
    realms:
      - atmos
    variables:
      tas:
        preprocessor: preprocessor_1
        mip: Amon
        field: T2Ms
        project: CMIP5
        ensemble: r1i1p1 
    additional_datasets:
      - {dataset: CanESM2,        exp: historical, start_year: 1986, end_year: 2005, ensemble: r1i1p1}
      - {dataset: CCSM4,          exp: historical, start_year: 1986, end_year: 2005}
      - {dataset: CESM1-CAM5,     exp: historical, start_year: 1986, end_year: 2005}
      - {dataset: CSIRO-Mk3-6-0,  exp: historical, start_year: 1986, end_year: 2005}
      - {dataset: GFDL-ESM2G,     exp: historical, start_year: 1986, end_year: 2005}
      - {dataset: IPSL-CM5A-LR,   exp: historical, start_year: 1986, end_year: 2005}
      - {dataset: MPI-ESM-LR,     exp: historical, start_year: 1986, end_year: 2005}

      - {dataset: CanESM2,        exp: rcp45, start_year: 2081, end_year: 2100}
      - {dataset: CCSM4,          exp: rcp45, start_year: 2081, end_year: 2100}
      - {dataset: CESM1-CAM5,     exp: rcp45, start_year: 2081, end_year: 2100}
      - {dataset: CSIRO-Mk3-6-0,  exp: rcp45, start_year: 2081, end_year: 2100}
      - {dataset: GFDL-ESM2G,     exp: rcp45, start_year: 2081, end_year: 2100}
      - {dataset: IPSL-CM5A-LR,   exp: rcp45, start_year: 2081, end_year: 2100}
      - {dataset: MPI-ESM-LR,     exp: rcp45, start_year: 2081, end_year: 2100}

    scripts:
      ch12_map_diff_each_model_fig12-9: &settings
        script: ipcc_ar5/ch12_map_diff_each_model_fig12-9.ncl
        # Required attributes:
        time_avg: annualclim             # Time average ('opt' argument of time_operations.ncl)
        experiment: rcp45                # IPCC Scenario, used to pair historical and rcp runs from same model
        # Optional attributes:
        #projection: Robinson             # Map projection, any valid ncl projection
        max_vert: 9                      # Maximum number of plots in vertical
        max_hori: 5                      # Maximum number of plots in horizontal
        title: "Annual mean surface air temperature change (RCP4.5: 2081-2100)"
        colormap: ./diag_scripts/shared/plot/rgb/ipcc_temperature_with_grey.rgb # colormap to use if do not want default
        diff_levs: [-2., -1.5, -1., -0.5, 0, 0.5, 1, 1.5, 2, 3, 4, 5, 7, 9, 11] # Contour levels for plots
        span: False # boolean to decide if span whole colormap (default = False)

### Time series plots
  ts_line_tas:
    description: Prepares data and plots timeseries of relative change of temperature in multiple scenarios incl. spread
    themes:
      - phys
    realms:
      - atmos
    variables:
      tas:
        preprocessor: preprocessor_1
        project: CMIP5
        ensemble: r1i1p1
        mip: Amon
        field: T2Ms
    additional_datasets:
      - {dataset: bcc-csm1-1-m,     exp: historical, start_year: 1850, end_year: 2005}
      - {dataset: BNU-ESM,          exp: historical, start_year: 1850, end_year: 2005}
      - {dataset: CESM1-BGC,        exp: historical, start_year: 1850, end_year: 2005}
      - {dataset: CESM1-CAM5,       exp: historical, start_year: 1850, end_year: 2005}
      - {dataset: CESM1-CAM5-1-FV2, exp: historical, start_year: 1850, end_year: 2005}
      - {dataset: CESM1-FASTCHEM,   exp: historical, start_year: 1850, end_year: 2005}
      - {dataset: CESM1-WACCM,      exp: historical, start_year: 1850, end_year: 2005}
      - {dataset: CMCC-CESM,        exp: historical, start_year: 1850, end_year: 2005}
      - {dataset: CMCC-CMS,         exp: historical, start_year: 1850, end_year: 2005}
      - {dataset: CNRM-CM5,         exp: historical, start_year: 1850, end_year: 2005}
      - {dataset: CNRM-CM5-2,       exp: historical, start_year: 1850, end_year: 2005}
      - {dataset: CSIRO-Mk3-6-0,    exp: historical, start_year: 1850, end_year: 2005}
      - {dataset: CSIRO-Mk3L-1-2,   exp: historical, start_year: 1851, end_year: 2005, ensemble: r1i2p1}
      - {dataset: EC-EARTH,         exp: historical, start_year: 1850, end_year: 2005, ensemble: r8i1p1}
      - {dataset: FGOALS-s2,        exp: historical, start_year: 1850, end_year: 2005, ensemble: r2i1p1}
      - {dataset: FGOALS-g2,        exp: historical, start_year: 1850, end_year: 2005}
      - {dataset: FIO-ESM,          exp: historical, start_year: 1850, end_year: 2005}
      - {dataset: GFDL-CM2p1,       exp: historical, start_year: 1861, end_year: 2005, ensemble: r2i1p1}
      - {dataset: GFDL-CM3,         exp: historical, start_year: 1860, end_year: 2005}
      - {dataset: GFDL-ESM2G,       exp: historical, start_year: 1861, end_year: 2005}
      - {dataset: GFDL-ESM2M,       exp: historical, start_year: 1861, end_year: 2005}
      - {dataset: GISS-E2-H,        exp: historical, start_year: 1850, end_year: 2005}
      - {dataset: GISS-E2-H,        exp: historical, start_year: 1850, end_year: 2005, ensemble: r1i1p2}
      - {dataset: GISS-E2-H,        exp: historical, start_year: 1850, end_year: 2005, ensemble: r1i1p3}
      - {dataset: GISS-E2-H-CC,     exp: historical, start_year: 1850, end_year: 2005}
      - {dataset: GISS-E2-R,        exp: historical, start_year: 1850, end_year: 2005}
      - {dataset: GISS-E2-R,        exp: historical, start_year: 1850, end_year: 2005, ensemble: r1i1p2}
      - {dataset: GISS-E2-R,        exp: historical, start_year: 1850, end_year: 2005, ensemble: r1i1p3}
      - {dataset: GISS-E2-R-CC,     exp: historical, start_year: 1850, end_year: 2005}
      - {dataset: HadGEM2-AO,       exp: historical, start_year: 1860, end_year: 2005}
      - {dataset: IPSL-CM5A-LR,     exp: historical, start_year: 1850, end_year: 2005}
      - {dataset: IPSL-CM5A-MR,     exp: historical, start_year: 1850, end_year: 2005}
      - {dataset: MIROC4h,          exp: historical, start_year: 1950, end_year: 2005}
      - {dataset: MIROC5,           exp: historical, start_year: 1850, end_year: 2005}
      - {dataset: MIROC-ESM,        exp: historical, start_year: 1850, end_year: 2005}
      - {dataset: MIROC-ESM-CHEM,   exp: historical, start_year: 1850, end_year: 2005}
      - {dataset: MPI-ESM-LR,       exp: historical, start_year: 1850, end_year: 2005}
      - {dataset: MPI-ESM-MR,       exp: historical, start_year: 1850, end_year: 2005}
      - {dataset: MPI-ESM-P,        exp: historical, start_year: 1850, end_year: 2005}
      - {dataset: MRI-CGCM3,        exp: historical, start_year: 1850, end_year: 2005}
      - {dataset: MRI-ESM1,         exp: historical, start_year: 1851, end_year: 2005}
      - {dataset: NorESM1-M,        exp: historical, start_year: 1850, end_year: 2005}

      - {dataset: bcc-csm1-1-m,     exp: rcp26, start_year: 2006, end_year: 2100}
      - {dataset: BNU-ESM,          exp: rcp26, start_year: 2006, end_year: 2100}
      - {dataset: CESM1-WACCM,      exp: rcp26, start_year: 2006, end_year: 2099, ensemble: r2i1p1}
      - {dataset: CNRM-CM5,         exp: rcp26, start_year: 2006, end_year: 2100}
      - {dataset: CSIRO-Mk3-6-0,    exp: rcp26, start_year: 2006, end_year: 2100}
      - {dataset: EC-EARTH,         exp: rcp26, start_year: 2006, end_year: 2100, ensemble: r8i1p1}
      - {dataset: FGOALS-g2,        exp: rcp26, start_year: 2006, end_year: 2100}
      - {dataset: FIO-ESM,          exp: rcp26, start_year: 2006, end_year: 2100}
      - {dataset: GFDL-CM3,         exp: rcp26, start_year: 2006, end_year: 2100}
      - {dataset: GFDL-ESM2G,       exp: rcp26, start_year: 2006, end_year: 2100}
      - {dataset: GFDL-ESM2M,       exp: rcp26, start_year: 2006, end_year: 2100}
      - {dataset: GISS-E2-H,        exp: rcp26, start_year: 2006, end_year: 2300}
      - {dataset: GISS-E2-H,        exp: rcp26, start_year: 2006, end_year: 2300, ensemble: r1i1p2}
      - {dataset: GISS-E2-H,        exp: rcp26, start_year: 2006, end_year: 2300, ensemble: r1i1p3}
      - {dataset: GISS-E2-R,        exp: rcp26, start_year: 2006, end_year: 2300}
      - {dataset: GISS-E2-R,        exp: rcp26, start_year: 2006, end_year: 2300, ensemble: r1i1p2}
      - {dataset: GISS-E2-R,        exp: rcp26, start_year: 2006, end_year: 2300, ensemble: r1i1p3}
      - {dataset: HadGEM2-AO,       exp: rcp26, start_year: 2006, end_year: 2100}
      - {dataset: IPSL-CM5A-LR,     exp: rcp26, start_year: 2006, end_year: 2300}
      - {dataset: IPSL-CM5A-MR,     exp: rcp26, start_year: 2006, end_year: 2100}
      - {dataset: MIROC5,           exp: rcp26, start_year: 2006, end_year: 2100}
      - {dataset: MIROC-ESM,        exp: rcp26, start_year: 2006, end_year: 2100}
      - {dataset: MIROC-ESM-CHEM,   exp: rcp26, start_year: 2006, end_year: 2100}
      - {dataset: MPI-ESM-LR,       exp: rcp26, start_year: 2006, end_year: 2100}
      - {dataset: MPI-ESM-MR,       exp: rcp26, start_year: 2006, end_year: 2100}
      - {dataset: MRI-CGCM3,        exp: rcp26, start_year: 2006, end_year: 2100}
      - {dataset: NorESM1-M,        exp: rcp26, start_year: 2006, end_year: 2100}

      - {dataset: bcc-csm1-1-m,     exp: rcp45, start_year: 2006, end_year: 2100}
      - {dataset: BNU-ESM,          exp: rcp45, start_year: 2006, end_year: 2100}
      - {dataset: CESM1-BGC,        exp: rcp45, start_year: 2006, end_year: 2100}
      - {dataset: CESM1-WACCM,      exp: rcp45, start_year: 2006, end_year: 2099, ensemble: r2i1p1}
      - {dataset: CMCC-CMS,         exp: rcp45, start_year: 2006, end_year: 2100}
      - {dataset: CSIRO-Mk3L-1-2,   exp: rcp45, start_year: 2006, end_year: 2300, ensemble: r1i2p1}
      - {dataset: EC-EARTH,         exp: rcp45, start_year: 2006, end_year: 2100, ensemble: r8i1p1}
      - {dataset: FGOALS-g2,        exp: rcp45, start_year: 2006, end_year: 2100}
      - {dataset: FIO-ESM,          exp: rcp45, start_year: 2006, end_year: 2100}
      - {dataset: GFDL-CM3,         exp: rcp45, start_year: 2006, end_year: 2300}
      - {dataset: GFDL-ESM2G,       exp: rcp45, start_year: 2006, end_year: 2100}
      - {dataset: GFDL-ESM2M,       exp: rcp45, start_year: 2006, end_year: 2200}
      - {dataset: GISS-E2-H,        exp: rcp45, start_year: 2006, end_year: 2200}
      - {dataset: GISS-E2-H,        exp: rcp45, start_year: 2006, end_year: 2300, ensemble: r1i1p2}
      - {dataset: GISS-E2-H,        exp: rcp45, start_year: 2006, end_year: 2300, ensemble: r1i1p3}
      - {dataset: GISS-E2-H-CC,     exp: rcp45, start_year: 2006, end_year: 2100}
      - {dataset: GISS-E2-R,        exp: rcp45, start_year: 2006, end_year: 2300}
      - {dataset: GISS-E2-R,        exp: rcp45, start_year: 2006, end_year: 2300, ensemble: r1i1p2}
      - {dataset: GISS-E2-R,        exp: rcp45, start_year: 2006, end_year: 2300, ensemble: r1i1p3}
      - {dataset: GISS-E2-R-CC,     exp: rcp45, start_year: 2006, end_year: 2100}
      - {dataset: HadGEM2-AO,       exp: rcp45, start_year: 2006, end_year: 2100}
      - {dataset: HadGEM2-CC,       exp: rcp45, start_year: 2006, end_year: 2100}
      - {dataset: IPSL-CM5A-LR,     exp: rcp45, start_year: 2006, end_year: 2300}
      - {dataset: IPSL-CM5A-MR,     exp: rcp45, start_year: 2006, end_year: 2300}
      - {dataset: MIROC5,           exp: rcp45, start_year: 2006, end_year: 2100}
      - {dataset: MIROC-ESM,        exp: rcp45, start_year: 2006, end_year: 2300}
      - {dataset: MIROC-ESM-CHEM,   exp: rcp45, start_year: 2006, end_year: 2100}
      - {dataset: MPI-ESM-LR,       exp: rcp45, start_year: 2006, end_year: 2300}
      - {dataset: MPI-ESM-MR,       exp: rcp45, start_year: 2006, end_year: 2100}
      - {dataset: MRI-CGCM3,        exp: rcp45, start_year: 2006, end_year: 2100}

      - {dataset: bcc-csm1-1-m,     exp: rcp60, start_year: 2006, end_year: 2100}
      - {dataset: CSIRO-Mk3-6-0,    exp: rcp60, start_year: 2006, end_year: 2100}
      - {dataset: FIO-ESM,          exp: rcp60, start_year: 2006, end_year: 2100}
      - {dataset: GFDL-CM3,         exp: rcp60, start_year: 2006, end_year: 2100}
      - {dataset: GFDL-ESM2G,       exp: rcp60, start_year: 2006, end_year: 2100}
      - {dataset: GFDL-ESM2M,       exp: rcp60, start_year: 2006, end_year: 2100}
      - {dataset: GISS-E2-H,        exp: rcp60, start_year: 2006, end_year: 2100}
      - {dataset: GISS-E2-H,        exp: rcp60, start_year: 2006, end_year: 2100, ensemble: r1i1p2}
      - {dataset: GISS-E2-H,        exp: rcp60, start_year: 2006, end_year: 2100, ensemble: r1i1p3}
      - {dataset: GISS-E2-R,        exp: rcp60, start_year: 2006, end_year: 2100}
      - {dataset: GISS-E2-R,        exp: rcp60, start_year: 2006, end_year: 2100, ensemble: r1i1p2}
      - {dataset: GISS-E2-R,        exp: rcp60, start_year: 2006, end_year: 2100, ensemble: r1i1p3}
      - {dataset: HadGEM2-AO,       exp: rcp60, start_year: 2006, end_year: 2100}
      - {dataset: IPSL-CM5A-LR,     exp: rcp60, start_year: 2006, end_year: 2100}
      - {dataset: IPSL-CM5A-MR,     exp: rcp60, start_year: 2006, end_year: 2100}
      - {dataset: MIROC5,           exp: rcp60, start_year: 2006, end_year: 2100}
      - {dataset: MIROC-ESM,        exp: rcp60, start_year: 2006, end_year: 2100}
      - {dataset: MIROC-ESM-CHEM,   exp: rcp60, start_year: 2006, end_year: 2100}
      - {dataset: MRI-CGCM3,        exp: rcp60, start_year: 2006, end_year: 2100}
      - {dataset: NorESM1-M,        exp: rcp60, start_year: 2006, end_year: 2100}

      - {dataset: bcc-csm1-1-m,     exp: rcp85, start_year: 2006, end_year: 2100}
      - {dataset: BNU-ESM,          exp: rcp85, start_year: 2006, end_year: 2100}
      - {dataset: CESM1-BGC,        exp: rcp85, start_year: 2006, end_year: 2100}
      - {dataset: CESM1-WACCM,      exp: rcp85, start_year: 2006, end_year: 2099, ensemble: r2i1p1}
      - {dataset: CMCC-CMS,         exp: rcp85, start_year: 2006, end_year: 2100}
      - {dataset: CSIRO-Mk3-6-0,    exp: rcp85, start_year: 2006, end_year: 2300}
      - {dataset: EC-EARTH,         exp: rcp85, start_year: 2006, end_year: 2100, ensemble: r8i1p1}
      - {dataset: FGOALS-g2,        exp: rcp85, start_year: 2006, end_year: 2100}
      - {dataset: FIO-ESM,          exp: rcp85, start_year: 2006, end_year: 2100}
      - {dataset: GFDL-CM3,         exp: rcp85, start_year: 2006, end_year: 2100}
      - {dataset: GFDL-ESM2G,       exp: rcp85, start_year: 2006, end_year: 2100}
      - {dataset: GFDL-ESM2M,       exp: rcp85, start_year: 2006, end_year: 2200}
      - {dataset: GISS-E2-H,        exp: rcp85, start_year: 2006, end_year: 2300}
      - {dataset: GISS-E2-H,        exp: rcp85, start_year: 2006, end_year: 2300, ensemble: r1i1p2}
      - {dataset: GISS-E2-H,        exp: rcp85, start_year: 2006, end_year: 2300, ensemble: r1i1p3}
      - {dataset: GISS-E2-H-CC,     exp: rcp85, start_year: 2006, end_year: 2100}
      - {dataset: GISS-E2-R,        exp: rcp85, start_year: 2006, end_year: 2300}
      - {dataset: GISS-E2-R,        exp: rcp85, start_year: 2006, end_year: 2300, ensemble: r1i1p2}
      - {dataset: GISS-E2-R,        exp: rcp85, start_year: 2006, end_year: 2300, ensemble: r1i1p3}
      - {dataset: GISS-E2-R-CC,     exp: rcp85, start_year: 2006, end_year: 2100}
      - {dataset: HadGEM2-AO,       exp: rcp85, start_year: 2006, end_year: 2100}
      - {dataset: HadGEM2-CC,       exp: rcp85, start_year: 2006, end_year: 2100}
      - {dataset: IPSL-CM5A-LR,     exp: rcp85, start_year: 2006, end_year: 2300}
      - {dataset: IPSL-CM5A-MR,     exp: rcp85, start_year: 2006, end_year: 2100}
      - {dataset: MIROC5,           exp: rcp85, start_year: 2006, end_year: 2100}
      - {dataset: MIROC-ESM,        exp: rcp85, start_year: 2006, end_year: 2100}
      - {dataset: MIROC-ESM-CHEM,   exp: rcp85, start_year: 2006, end_year: 2100}
      - {dataset: MPI-ESM-LR,       exp: rcp85, start_year: 2006, end_year: 2300}
      - {dataset: MPI-ESM-MR,       exp: rcp85, start_year: 2006, end_year: 2100}
      - {dataset: MRI-CGCM3,        exp: rcp85, start_year: 2006, end_year: 2100}
      - {dataset: MRI-ESM1,         exp: rcp85, start_year: 2006, end_year: 2100}
      - {dataset: NorESM1-M,        exp: rcp85, start_year: 2006, end_year: 2100}

    scripts:
      ch12_ts_line_mean_spread_tas: &ts_settings
        ## Required attributes:
        script: ipcc_ar5/ch12_ts_line_mean_spread.ncl
        #styleset: CMIP5
        # Which scenarios shall be included in figure
        scenarios: [rcp26, rcp45, rcp60, rcp85]
        # Start years in time periods (e.g. start of historical period and rcps)
        syears: [1850, 2006, 2101]
        # end years in time periods (end year of historical runs and rcps)
        eyears: [2005, 2100, 2300]
        # start year of reference period (e.g. 1986)
        begin_ref_year: 1986
        # end year of reference period (e.g 2005)
        end_ref_year: 2005
        # labels to use in legend depending on scenarios
        label: [Historical, RCP2.6, RCP4.5, RCP6.0, RCP8.5] 
        ## Optional attributes:
        # Specify title in plot  
        title: "Global surface temperature change (~S~o~N~ C)"
        # how many standard deviations to calculate the spread with? default is 1., ipcc tas used 1.64
        spread: 1.64
        # Specify y-axis title
        yaxis: "(~S~o~N~ C)"
        # Minimim value on y-axis, default calculated from data
        ymin: -2
        # Maximum value on y-axis          
        ymax: 12
        # Save number of model runs per period and scenario in netcdf to print in plot? (True, False)
        model_nr: True
        # Choose file to create colormap from or specify ncl colormap
        colormap: ./diag_scripts/shared/plot/rgb/ipcc_color_tseries.rgb
        # Minimum and maximum latitudes and longitudes if not global
        #ts_minlat: 43
        #ts_maxlat: 54.5
        #ts_minlon: -12
        #ts_maxlon: 35
      ch12_plot_ts_line_mean_spread_tas:
        <<: *ts_settings
        script: ipcc_ar5/ch12_plot_ts_line_mean_spread.ncl
        ancestors: ['tas', 'ts_line_tas/ch12_ts_line_mean_spread_tas']

  ts_line_rsut:
    description: Prepare data and plot timeseries of relative change in short wave radiation, multiple scenarios incl. spread
    themes:
      - phys
    realms:
      - atmos
    variables:
      rsut:
        preprocessor: preprocessor_1
        project: CMIP5
        ensemble: r1i1p1
        mip: Amon
        field: T2Ms
    additional_datasets:
      - {dataset: CanESM2,          exp: historical, start_year: 1850, end_year: 2005, ensemble: r1i1p1}
      - {dataset: CCSM4,            exp: historical, start_year: 1850, end_year: 2005}
      - {dataset: CESM1-CAM5,       exp: historical, start_year: 1850, end_year: 2005}
      - {dataset: CSIRO-Mk3-6-0,    exp: historical, start_year: 1850, end_year: 2005}
      - {dataset: MPI-ESM-LR,       exp: historical, start_year: 1850, end_year: 2005}

      - {dataset: CanESM2,          exp: rcp26, start_year: 2006, end_year: 2100}
      - {dataset: CCSM4,            exp: rcp26, start_year: 2006, end_year: 2100}
      - {dataset: CSIRO-Mk3-6-0,    exp: rcp26, start_year: 2006, end_year: 2100}
      - {dataset: MPI-ESM-LR,       exp: rcp26, start_year: 2006, end_year: 2100}

      - {dataset: CanESM2,          exp: rcp45, start_year: 2006, end_year: 2100}
      - {dataset: CCSM4,            exp: rcp45, start_year: 2006, end_year: 2100}
      - {dataset: CESM1-CAM5,       exp: rcp45, start_year: 2006, end_year: 2100}
      - {dataset: CSIRO-Mk3-6-0,    exp: rcp45, start_year: 2006, end_year: 2100}
      - {dataset: MPI-ESM-LR,       exp: rcp45, start_year: 2006, end_year: 2100}

      - {dataset: CCSM4,            exp: rcp60, start_year: 2006, end_year: 2100}
      - {dataset: CESM1-CAM5,       exp: rcp60, start_year: 2006, end_year: 2100}
      - {dataset: CSIRO-Mk3-6-0,    exp: rcp60, start_year: 2006, end_year: 2100}

      - {dataset: CanESM2,          exp: rcp85, start_year: 2006, end_year: 2100}
      - {dataset: CCSM4,            exp: rcp85, start_year: 2006, end_year: 2100}
      - {dataset: CESM1-CAM5,       exp: rcp85, start_year: 2006, end_year: 2100}
      - {dataset: CSIRO-Mk3-6-0,    exp: rcp85, start_year: 2006, end_year: 2100}
      - {dataset: MPI-ESM-LR,       exp: rcp85, start_year: 2006, end_year: 2100}

    scripts:
      ch12_ts_line_mean_spread_rsut: &ts_settings_rsut
        ## Required attributes:
        script: ipcc_ar5/ch12_ts_line_mean_spread.ncl
        styleset: CMIP5
        # Scenarios included in figure
        scenarios: [rcp26, rcp45, rcp60, rcp85]
        # Start years in time periods as list (e.g. start of historical period and rcps)
        syears: [1850, 2006]
        # End years in time periods as list (end year of historical runs and rcps)
        eyears: [2005, 2100]
        # Start year of reference period (numeric)
        begin_ref_year: 1900
        # End year of reference period (numeric)
        end_ref_year: 1950
        # Labels to use in legend depending on scenarios as list
        label: [Historical, RCP2.6, RCP4.5, RCP6.0, RCP8.5]
        ## Optional attributes:
        # Title in plot
        title: "Global TOA short wave radiation change"
        # Standard deviations to calculate the spread with? default is 1., ipcc tas used 1.64, numeric
        spread: 1.0
        # y-axis title, string 
        yaxis: "(Wm~S~-2~N~)"
        # Minimim value on y-axis
        ymin: -3
        # Maximum value on y-axis
        ymax: 6
        # Save number of model runs per period and scenario in netcdf to print in plot? (False, True)
        model_nr: True
        # Alternative colormap, either path to .rgb file or ncl name
        colormap: ./diag_scripts/shared/plot/rgb/ipcc_color_tseries.rgb
        # Minimum and macimum latitude and longitude if not global
        #ts_minlat: 43
        #ts_maxlat: 54.5
        #ts_minlon: -12
        #ts_maxlon: 35
      ch12_plot_ts_line_mean_spread_rsut:
        <<: *ts_settings_rsut
        script: ipcc_ar5/ch12_plot_ts_line_mean_spread.ncl
        ancestors: ['rsut', 'ts_line_rsut/ch12_ts_line_mean_spread_rsut']

  ts_line_rlut:
    description: Prepare data and plot timeseries of relative change in long wave radiation, multiple scenarios incl. spread
    themes:
      - phys
    realms:
      - atmos
    variables:
      rlut:
        preprocessor: preprocessor_1
        mip: Amon
        field: T2Ms
        project: CMIP5
        exp: historical
        ensemble: r1i1p1
    additional_datasets:
      - {dataset: CanESM2,          start_year: 1850, end_year: 2005, ensemble: r1i1p1}
      - {dataset: CCSM4,            start_year: 1850, end_year: 2005}
      - {dataset: CESM1-CAM5,       start_year: 1850, end_year: 2005}
      - {dataset: IPSL-CM5A-LR,     start_year: 1850, end_year: 2005}
      - {dataset: MPI-ESM-LR,       start_year: 1850, end_year: 2005}

      - {dataset: CanESM2,          exp: rcp26, start_year: 2006, end_year: 2100}
      - {dataset: CCSM4,            exp: rcp26, start_year: 2006, end_year: 2100}
      - {dataset: CESM1-CAM5,       exp: rcp26, start_year: 2006, end_year: 2100}
      - {dataset: IPSL-CM5A-LR,     exp: rcp26, start_year: 2006, end_year: 2100}
      - {dataset: MPI-ESM-LR,       exp: rcp26, start_year: 2006, end_year: 2100}

      - {dataset: CanESM2,          exp: rcp45, start_year: 2006, end_year: 2100}
      - {dataset: CCSM4,            exp: rcp45, start_year: 2006, end_year: 2100}
      - {dataset: CESM1-CAM5,       exp: rcp45, start_year: 2006, end_year: 2100}
      - {dataset: IPSL-CM5A-LR,     exp: rcp45, start_year: 2006, end_year: 2100}
      - {dataset: MPI-ESM-LR,       exp: rcp45, start_year: 2006, end_year: 2100}

      - {dataset: CCSM4,            exp: rcp60, start_year: 2006, end_year: 2100}
      - {dataset: CESM1-CAM5,       exp: rcp60, start_year: 2006, end_year: 2100}
      - {dataset: CSIRO-Mk3-6-0,    exp: rcp60, start_year: 2006, end_year: 2100}
      - {dataset: IPSL-CM5A-LR,     exp: rcp60, start_year: 2006, end_year: 2100}

      - {dataset: CanESM2,          exp: rcp85, start_year: 2006, end_year: 2100}
      - {dataset: CCSM4,            exp: rcp85, start_year: 2006, end_year: 2100}
      - {dataset: IPSL-CM5A-LR,     exp: rcp85, start_year: 2006, end_year: 2100}
      - {dataset: MPI-ESM-LR,       exp: rcp85, start_year: 2006, end_year: 2100}

    scripts:
      ch12_ts_line_mean_spread_rlut: &ts_settings_rlut
        ## Required attributes:
        script: ipcc_ar5/ch12_ts_line_mean_spread.ncl
        styleset: CMIP5
        # Scenarios included in figure
        scenarios: [rcp26, rcp45, rcp60, rcp85]
        # Start years in time periods as list (e.g. start of historical period and rcps)
        syears: [1850, 2006]
        # End years in time periods as list (end year of historical runs and rcps)
        eyears: [2005, 2100]
        # Start year of reference period (numeric)
        begin_ref_year: 1900
        # End year of reference period (numeric)
        end_ref_year: 1950
        # Labels to use in legend depending on scenarios as list
        label: [Historical, RCP2.6, RCP4.5, RCP6.0, RCP8.5]
        ## Optional attributes:
        # Title in plot
        title: "Global TOA long wave radiation change"
        # Standard deviations to calculate the spread with? default is 1., ipcc tas used 1.64, numeric
        spread: 1.0
        # y-axis title, string 
        yaxis: "(Wm~S~-2~N~)"
        # Minimim value on y-axis
        ymin: -3
        # Maximum value on y-axis
        ymax: 6
        # Save number of model runs per period and scenario in netcdf to print in plot? (False, True)
        model_nr: True
        # Alternative colormap, either path to .rgb file or ncl name
        colormap: ./diag_scripts/shared/plot/rgb/ipcc_color_tseries.rgb
        # Minimum and macimum latitude and longitude if not global
        #ts_minlat: 43
        #ts_maxlat: 54.5
        #ts_minlon: -12
        #ts_maxlon: 35
      ch12_plot_ts_line_mean_spread_rlut:
        <<: *ts_settings_rlut
        script: ipcc_ar5/ch12_plot_ts_line_mean_spread.ncl
        ancestors: ['rlut', 'ts_line_rlut/ch12_ts_line_mean_spread_rlut']

  ts_line_rtmt:
    description: Prepare data and plot timeseries of relative change in TOA net radiation, multiple scenarios incl. spread
    themes:
      - phys
    realms:
      - atmos
    variables:
      rtmt:
        preprocessor: preprocessor_1
        mip: Amon
        field: T2Ms
        project: CMIP5
        exp: historical
        ensemble: r1i1p1
    additional_datasets:
      - {dataset: CanESM2,          exp: historical, start_year: 1850, end_year: 2005, ensemble: r1i1p1}
      - {dataset: CCSM4,            exp: historical, start_year: 1850, end_year: 2005}
      - {dataset: CESM1-CAM5,       exp: historical, start_year: 1850, end_year: 2005}
      - {dataset: IPSL-CM5A-LR,     exp: historical, start_year: 1850, end_year: 2005}
      - {dataset: MPI-ESM-LR,       exp: historical, start_year: 1850, end_year: 2005}

      - {dataset: CanESM2,          exp: rcp26, start_year: 2006, end_year: 2100}
      - {dataset: CCSM4,            exp: rcp26, start_year: 2006, end_year: 2100}
      - {dataset: CESM1-CAM5,       exp: rcp26, start_year: 2006, end_year: 2100}
      - {dataset: IPSL-CM5A-LR,     exp: rcp26, start_year: 2006, end_year: 2100}
      - {dataset: MPI-ESM-LR,       exp: rcp26, start_year: 2006, end_year: 2100}

      - {dataset: CanESM2,          exp: rcp45, start_year: 2006, end_year: 2100}
      - {dataset: CCSM4,            exp: rcp45, start_year: 2006, end_year: 2100}
      - {dataset: CESM1-CAM5,       exp: rcp45, start_year: 2006, end_year: 2100}
      - {dataset: IPSL-CM5A-LR,     exp: rcp45, start_year: 2006, end_year: 2100}
      - {dataset: MPI-ESM-LR,       exp: rcp45, start_year: 2006, end_year: 2100}

      - {dataset: CCSM4,            exp: rcp60, start_year: 2006, end_year: 2100}
      - {dataset: CESM1-CAM5,       exp: rcp60, start_year: 2006, end_year: 2100}
      - {dataset: IPSL-CM5A-LR,     exp: rcp60, start_year: 2006, end_year: 2100}

      - {dataset: CanESM2,          exp: rcp85, start_year: 2006, end_year: 2100}
      - {dataset: CCSM4,            exp: rcp85, start_year: 2006, end_year: 2100}
      - {dataset: CESM1-CAM5,       exp: rcp85, start_year: 2006, end_year: 2100}
      - {dataset: IPSL-CM5A-LR,     exp: rcp85, start_year: 2006, end_year: 2100}
      - {dataset: MPI-ESM-LR,       exp: rcp85, start_year: 2006, end_year: 2100}

    scripts:
      ch12_ts_line_mean_spread_rtmt: &ts_settings_rtmt
        ## Required attributes:
        script: ipcc_ar5/ch12_ts_line_mean_spread.ncl
        styleset: CMIP5
        # Scenarios included in figure
        scenarios: [rcp26, rcp45, rcp60, rcp85]
        # Start years in time periods as list (e.g. start of historical period and rcps)
        syears: [1850, 2006]
        # End years in time periods as list (end year of historical runs and rcps)
        eyears: [2005, 2100]
        # Start year of reference period (numeric)
        begin_ref_year: 1900
        # End year of reference period (numeric)
        end_ref_year: 1950
        # Labels to use in legend depending on scenarios as list
        label: [Historical, RCP2.6, RCP4.5, RCP6.0, RCP8.5]
        ## Optional attributes:
        # Title in plot
        title: "Global TOA net radiation change"
        # Standard deviations to calculate the spread with? default is 1., ipcc tas used 1.64, numeric
        spread: 1.0
        # y-axis title, string 
        yaxis: "(Wm~S~-2~N~)"
        # Minimim value on y-axis
        ymin: -3
        # Maximum value on y-axis
        ymax: 6
        # Save number of model runs per period and scenario in netcdf to print in plot? (False, True)
        model_nr: True
        # Alternative colormap, either path to .rgb file or ncl name
        colormap: ./diag_scripts/shared/plot/rgb/ipcc_color_tseries.rgb
        # Minimum and macimum latitude and longitude if not global
        #ts_minlat: 43
        #ts_maxlat: 54.5
        #ts_minlon: -12
        #ts_maxlon: 35
      ch12_plot_ts_line_mean_spread_rtmt:
        <<: *ts_settings_rtmt
        script: ipcc_ar5/ch12_plot_ts_line_mean_spread.ncl
        ancestors: ['rtmt', 'ts_line_rtmt/ch12_ts_line_mean_spread_rtmt']

###  Mean temperature change in RCPs for multi model mean ###
  IAV_calc_tas:
    description: Calculate temperature interannual variability for stippling significance
    themes:
      - varmodes
    realms:
      - atmos
    variables:
      tas:
        preprocessor: preproc_map
        project: CMIP5
        mip: Amon
        field: T2Ms
        exp: piControl
        ensemble: r1i1p1
    additional_datasets:

      - {dataset: CanESM2,       start_year: 2015, end_year: 3010}
      - {dataset: CCSM4,         start_year: 250, end_year: 1300}
      - {dataset: CESM1-CAM5,    start_year: 1, end_year: 319}
      - {dataset: CSIRO-Mk3-6-0, start_year: 1, end_year: 500}
      - {dataset: GFDL-ESM2G,    start_year: 1, end_year: 500}
      - {dataset: IPSL-CM5A-LR,  start_year: 1800, end_year: 2799}     
      - {dataset: MPI-ESM-LR,    start_year: 1850, end_year: 2849}

    scripts:
      ch12_calc_IAV_for_stippandhatch_tas: &IAV_settings_tas
        script: ipcc_ar5/ch12_calc_IAV_for_stippandhatch.ncl
        ## Required attributes:
        styleset: CMIP5
        # Time average ('opt' argument of time_operations.ncl, annualclim, seasonalclim)
        time_avg: seasonalclim
        ## Optional attributes:
        # Length of period in years to calculate variability over, default is total time period
        periodlength: 20.

  tas_change_mmm:
    description: Air temperature change (annual mean or seasonal) in multi-model mean with significance
    themes:
      - phys
    realms:
      - atmos
    variables:
      tas:
        preprocessor: preproc_map
        project: CMIP5 
        ensemble : r1i1p1
        mip: Amon
        field: T2Ms
    additional_datasets:
      - {dataset: GFDL-ESM2G,   exp: historical, start_year: 1986, end_year: 2005, ensemble: r1i1p1}
      - {dataset: MPI-ESM-LR,   exp: historical, start_year: 1986, end_year: 2005}

      - {dataset: GFDL-ESM2G,   exp: rcp45, start_year: 2081, end_year: 2100}
      - {dataset: MPI-ESM-LR,   exp: rcp45, start_year: 2081, end_year: 2100}

      - {dataset: GFDL-ESM2G,   exp: rcp85, start_year: 2081, end_year: 2100}
      - {dataset: MPI-ESM-LR,   exp: rcp85, start_year: 2081, end_year: 2100}

    scripts:
      ch12_calc_map_diff_mmm_tas: &tas_map_settings
        script: ipcc_ar5/ch12_calc_map_diff_mmm_stippandhatch.ncl
        # Required attributes:
        ancestors: ['tas', 'IAV_calc_tas/ch12_calc_IAV_for_stippandhatch_tas']
        scenarios: [rcp45, rcp85]      #list with scenarios to be included
        periods: [2081]         #list with start years of periods to be included
        time_avg: seasonalclim  #seasonal or annual means
        label: ["JJA RCP4.5 2081-2100", "JJA RCP8.5 2081-2100"]   # labels on top of each panel, loop is seasons, scenarios, periods
        # Optional attributes:
        seasons: [2]  # list with seasons index if averagetime is "seasonalclim" (required for seasonalclim),  DJF:0, MAM:1, JJA:2, SON:3
        #iavmode:   # use IAV data from multi-model mean or include identical models to the ones plotted? default is mmm, otherwise set iavmode = "each" and make sure to have them in IAV_calc_tas
        #percent: #0 or 1, difference in percent = 1, default = 0
      ch12_plot_map_diff_mmm_stipp_tas:
        <<: *tas_map_settings
        script: ipcc_ar5/ch12_plot_map_diff_mmm_stipp.ncl
        ancestors: ['tas', 'tas_change_mmm/ch12_calc_map_diff_mmm_tas']
        # Optional attributes:
        #projection: Robinson   # map projection, any valid ncl projection, default Robinson
        diff_levs: [-2, -1.5, -1, -0.5, 0, 0.5, 1, 1.5, 2, 3, 4, 5, 6, 7, 9] # explicit levels for all contour plots
        max_vert: 2  # maximum number of plots in vertical
        max_hori: 2  # maximum number of plots in horizontal
        colormap: ./diag_scripts/shared/plot/rgb/ipcc_temperature_with_grey.rgb # use alternative colormap
        span: False # boolean to decide if span whole colormap (default = True)
        sig: True # plot stippling for significance?
        not_sig: True # plot hatching for uncertainty?
        #pltname: # an alternative name for the output plot, default is diagnostic + varname + time_avg
        model_nr: True # boolean, true if want number of models included in mmm to be printet in top right and precalculated
        #plotmask: apply a mask when plotting? either "None" (default), "ocean", "land"

  ###  Mean Precipitation change in RCPs for multi model mean ###
  IAV_calc_pr:
    description: Calculate precipitation interannual variability for stippling significance
    themes:
      - varmodes
    realms:
      - atmos
    variables:
      pr:
        preprocessor: preproc_map
        project: CMIP5
        mip: Amon
        field: T2Ms
        exp: piControl
        ensemble: r1i1p1
    additional_datasets:
      - {dataset: IPSL-CM5A-LR,     start_year: 1800, end_year: 2799}
      - {dataset: GFDL-ESM2G,       start_year: 1, end_year: 500}
      - {dataset: MPI-ESM-LR,       start_year: 1850, end_year: 2849}

    scripts:
      ch12_calc_IAV_for_stippandhatch_pr: &IAV_settings_pr
        script: ipcc_ar5/ch12_calc_IAV_for_stippandhatch.ncl
        # Required attributes:
        styleset: CMIP5
        # Time average ('opt' argument of time_operations.ncl, seasonalclim, annualclim)
        time_avg: annualclim
        ## Optional attributes:
        # Calculate multi-model mean or save IAV for each model separately? default is mmm, (mmm, each)
        iavmode: each
        periodlength: 20.

  pr_change_mmm:
    description: Precipitation change (annual mean or seasonal) in multi-model mean with signficance
    themes:
      - phys
    realms:
      - atmos
    variables:
      pr:
        preprocessor: preproc_map
        project: CMIP5
        ensemble: r1i1p1
        mip: Amon
        field: T2Ms
    additional_datasets:
      - {dataset: GFDL-ESM2G,   exp: historical, start_year: 1986, end_year: 2005, ensemble: r1i1p1}
      - {dataset: MPI-ESM-LR,   exp: historical, start_year: 1986, end_year: 2005}

      - {dataset: GFDL-ESM2G,   exp: rcp45, start_year: 2081, end_year: 2100}
      - {dataset: MPI-ESM-LR,   exp: rcp45, start_year: 2081, end_year: 2100}

      - {dataset: GFDL-ESM2G,   exp: rcp85, start_year: 2081, end_year: 2100}
      - {dataset: MPI-ESM-LR,   exp: rcp85, start_year: 2081, end_year: 2100}

    scripts:
      ch12_calc_map_diff_mmm_pr: &pr_map_settings
        script: ipcc_ar5/ch12_calc_map_diff_mmm_stippandhatch.ncl
        ## Required attributes:
        ancestors: ['pr', 'IAV_calc_pr/ch12_calc_IAV_for_stippandhatch_pr']
        # Scenarios to be included as list ([rcp26, rcp45, rcp60, rcp85])
        scenarios: [rcp45, rcp85]
        # Start years of periods to be included as list
        periods: [2081]
        # Time average ('opt' argument of time_operations.ncl, seasonalclim, annualclim)
        time_avg: annualclim
        # Labels on top of each panel as list of strings, loop is seasons, scenarios, periods
        label: ["RCP4.5 2081-2100", "RCP8.5 2081-2100"]
        ## Optional attributes:
        # Season indices as list, required for seasonalclim),  DJF:0, MAM:1, JJA:2, SON:3
        #seasons: [2]
        # use IAV data from multi-model mean or include identical models to above? (mmm, each), if "each" calculate them in IAV_calc_pr
        iavmode: each 
        # Difference in percent? (0, 1) default = 0
        percent: 1
      ch12_plot_map_diff_mmm_stipp_pr:
        <<: *pr_map_settings
        script: ipcc_ar5/ch12_plot_map_diff_mmm_stipp.ncl
        ancestors: ['pr', 'pr_change_mmm/ch12_calc_map_diff_mmm_pr']
        ## Optional attributes:
        # Map projection, any valid ncl projection, default Robinson
        #projection: Robinson
        # Contour levels for all difference plots
        diff_levs: [-50, -40, -30, -20, -10, 0, 10, 20, 30, 40, 50]
        # Maximum number of plots in vertical
        max_vert: 2
        # Maximum number of plots in horizontal
        max_hori: 2
        # Specify alternative colormap
        colormap: ./diag_scripts/shared/plot/rgb/ipcc-precip-delta.rgb
        # boolean to decide if span whole colormap (default = True)
        #span: 
        # Stippling for significance?
        sig: True
        # Hatching for uncertainty?
        not_sig: True
        # Alternative name for the output plot, default is diagnostic + varname + time_avg
        #pltname:
        # Number of models precalculated included in mmm calculated and printet in top right of panel (False, True) 
        model_nr: True
        # Apply a mask when plotting? (None (default), ocean, land)
        #plotmask:

  # ###  Mean zonal variable change in one RCP for multi model mean ###
  # IAV_calc_ta:
  #   description: Calculate 3D temperature (ta) IAV for stippling significance in zonal plot
  #   themes:
  #     - varmodes
  #   realms:
  #     - atmos
  #   variables:
  #     ta:
  #       preprocessor: preproc_zo
  #       reference_dataset: CanESM2
  #       project: CMIP5
  #       mip: Amon
  #       field: T3Ms
  #       ensemble: r1i1p1
  #   additional_datasets:
  #     - {dataset: CanESM2,        exp: piControl, start_year: 2015, end_year: 3010}
  #     - {dataset: GFDL-ESM2G,     exp: piControl, start_year: 1, end_year: 500}
  #     - {dataset: IPSL-CM5A-LR,   exp: piControl, start_year: 1800, end_year: 2799}

  #   scripts:
  #     ch12_calc_IAV_for_stippandhatch_ta:
  #       script: ipcc_ar5/ch12_calc_IAV_for_stippandhatch.ncl
  #       # Required attributes:
  #       styleset: CMIP5
  #       time_avg: annualclim    # Time average ('opt' argument of time_operations.ncl), if seasonalclim seasons needed
  #       #seasons: [0, 1, 2, 3]
  #       # Optional attributes:
  #       periodlength: 20.

  # ###  Mean air temperature change in one RCP for multi model mean ###
  # ta_change_mmm:
  #   description: Air temperature change for RCPs, periods, significance as zonal plots.
  #   themes:
  #     - phys
  #   realms:
  #     - atmos
  #   variables:
  #     ta:
  #       preprocessor: preproc_zo
  #       reference_dataset: CanESM2
  #       project: CMIP5
  #       mip: Amon
  #       field: T3Ms
  #       ensemble: r1i1p1
  #   additional_datasets:
  #     - {dataset: CanESM2,        exp: historical, start_year: 1986, end_year: 2005, ensemble: r1i1p1}
  #     - {dataset: GFDL-ESM2G,     exp: historical, start_year: 1986, end_year: 2005}
  #     - {dataset: MPI-ESM-LR,     exp: historical, start_year: 1986, end_year: 2005}

  #     - {dataset: CanESM2,        exp: rcp26, start_year: 2081, end_year: 2100}
  #     - {dataset: GFDL-ESM2G,     exp: rcp26, start_year: 2081, end_year: 2100}
  #     - {dataset: MPI-ESM-LR,     exp: rcp26, start_year: 2081, end_year: 2100}

  #     - {dataset: CanESM2,        exp: rcp45, start_year: 2081, end_year: 2100}
  #     - {dataset: GFDL-ESM2G,     exp: rcp45, start_year: 2081, end_year: 2100}
  #     - {dataset: MPI-ESM-LR,     exp: rcp45, start_year: 2081, end_year: 2100}

  #     - {dataset: CanESM2,        exp: rcp85, start_year: 2081, end_year: 2100}
  #     - {dataset: GFDL-ESM2G,     exp: rcp85, start_year: 2081, end_year: 2100}
  #     - {dataset: MPI-ESM-LR,     exp: rcp85, start_year: 2081, end_year: 2100}

  #   scripts:
  #     ch12_calc_zonal_diff_mmm_ta: &ta_settings
  #       script: ipcc_ar5/ch12_calc_zonal_cont_diff_mmm_stippandhatch.ncl
  #       # Required attributes:
  #       ancestors: ['ta', 'IAV_calc_ta/ch12_calc_IAV_for_stippandhatch_ta']
  #       scenarios: [rcp26, rcp45, rcp85]      #list with scenarios to be included
  #       periods: [2081]         #list with start years of periods to be included
  #       time_avg: annualclim  #seasonal or annual means
  #       projection: Robinson   # map projection, any valid ncl projection  
  #       label: ["RCP2.6 2081-2100", "RCP4.5 2081-2100", "RCP8.5 2081-2100"]   # labels on top of each panel, e.g. scenario + rcp, loop to plot is seasons, scenarios, periods, needed to write
  #       # Optional attributes:
  #       units: (~F35~J~F~C)
  #       #seasons:   # list with seasons index to be included if averagetime is "seasonalclim" (required for seasonalclim),  DJF:0, MAM:1, JJA:2, SON:3
  #       #iavmode:   # use IAV data from multi-model mean calculated by IAV_mmm_for_stippandhatch_ipcc12.ncl or include identical models to the ones plotted calculated for each model on native grid with IAV_for_stippandhatch_ipcc12.ncl default if not given is mmm, otherwise set iavmode = "each"
  #       #percent: #0 or 1, difference in percent = 1, default = 0
  #     ch12_plot_zonal_diff_mmm_ta:
  #       <<: *ta_settings
  #       script: ipcc_ar5/ch12_plot_zonal_diff_mmm_stipp.ncl
  #       ancestors: ['ta', 'ta_change_mmm/ch12_calc_zonal_diff_mmm_ta']
  #       colormap: ./diag_scripts/shared/plot/rgb/ipcc_temperature_with_grey.rgb
  #       diff_levs: [-2, -1.5, -1, -0.5, 0, 0.5, 1, 1.5, 2, 3, 4, 5, 6, 7, 8]
  #       sig: True
  #       not_sig: True
  #       max_hori: 3
  #       model_nr: True # boolean, true if want number of models included in mmm to be printet in top right and precalculated

  ###  Mean Soil Moisture change in RCPs for multi model mean ###
  IAV_calc_mrsos:
    description: Calculate soil moisture IAV for stippling significance
    themes:
      - varmodes
    realms:
      - atmos
    variables:
      mrsos:
        preprocessor: preproc_map_land
        project: CMIP5
        mip: Lmon
        field: T2Ms
        exp: piControl
        ensemble: r1i1p1
    additional_datasets:
      - {dataset: CanESM2,          start_year: 2015, end_year: 3010}
      - {dataset: CESM1-CAM5,       start_year: 1, end_year: 319}
      - {dataset: CSIRO-Mk3-6-0,    start_year: 1, end_year: 500}
      - {dataset: GFDL-ESM2G,       start_year: 1, end_year: 500}
      - {dataset: IPSL-CM5A-LR,     start_year: 1800, end_year: 2799}

    scripts:
      ch12_calc_IAV_for_stippandhatch_mrsos: &IAV_settings_mrsos
        script: ipcc_ar5/ch12_calc_IAV_for_stippandhatch.ncl
        # Required attributes:
        styleset: CMIP5
        time_avg: annualclim    # Time average ('opt' argument of time_operations.ncl), if seasonalclim seasons needed
        #seasons: [0, 1, 2, 3]
        # Optional attributes:
        periodlength: 20.

  mrsos_change_mmm:
    description: Soil moisture change (annual mean or seasonal) in multi-model mean with signficance
    themes:
      - phys
    realms:
      - atmos
    variables:
      mrsos:
        preprocessor: preproc_map_land
        project: CMIP5
        mip: Lmon
        field: T2Ms
        ensemble: r1i1p1
    additional_datasets:
      - {dataset: CanESM2,       exp: historical, start_year: 1986, end_year: 2005, ensemble: r1i1p1}
      - {dataset: CCSM4,         exp: historical, start_year: 1986, end_year: 2005}
      - {dataset: CESM1-CAM5,    exp: historical, start_year: 1986, end_year: 2005}
      - {dataset: CSIRO-Mk3-6-0, exp: historical, start_year: 1986, end_year: 2005}
      - {dataset: GFDL-CM3,      exp: historical, start_year: 1986, end_year: 2005}

      - {dataset: CanESM2,       exp: rcp26, start_year: 2081, end_year: 2100}
      - {dataset: CCSM4,         exp: rcp26, start_year: 2081, end_year: 2100}
      - {dataset: CESM1-CAM5,    exp: rcp26, start_year: 2081, end_year: 2100}
      - {dataset: CSIRO-Mk3-6-0, exp: rcp26, start_year: 2081, end_year: 2100}
      - {dataset: GFDL-CM3,      exp: rcp26, start_year: 2081, end_year: 2100}

      - {dataset: CanESM2,       exp: rcp45, start_year: 2081, end_year: 2100}
      - {dataset: CCSM4,         exp: rcp45, start_year: 2081, end_year: 2100}
      - {dataset: CESM1-CAM5,    exp: rcp45, start_year: 2081, end_year: 2100}
      - {dataset: CSIRO-Mk3-6-0, exp: rcp45, start_year: 2081, end_year: 2100}
      - {dataset: GFDL-CM3,      exp: rcp45, start_year: 2081, end_year: 2100}

      - {dataset: CCSM4,         exp: rcp60, start_year: 2081, end_year: 2100}
      - {dataset: CESM1-CAM5,    exp: rcp60, start_year: 2081, end_year: 2100}
      - {dataset: CSIRO-Mk3-6-0, exp: rcp60, start_year: 2081, end_year: 2100}
      - {dataset: GFDL-CM3,      exp: rcp60, start_year: 2081, end_year: 2100}

      - {dataset: CanESM2,       exp: rcp85, start_year: 2081, end_year: 2100}
      - {dataset: CCSM4,         exp: rcp85, start_year: 2081, end_year: 2100}
      - {dataset: CESM1-CAM5,    exp: rcp85, start_year: 2081, end_year: 2100}
      - {dataset: CSIRO-Mk3-6-0, exp: rcp85, start_year: 2081, end_year: 2100}
      - {dataset: GFDL-CM3,      exp: rcp85, start_year: 2081, end_year: 2100}

    scripts:
      ch12_calc_map_diff_mmm_mrsos: &mrsos_map_settings
        script: ipcc_ar5/ch12_calc_map_diff_mmm_stippandhatch.ncl
        # Required attributes:
        ancestors: ['mrsos', 'IAV_calc_mrsos/ch12_calc_IAV_for_stippandhatch_mrsos']
        scenarios: [rcp26, rcp45, rcp60, rcp85]      #list with scenarios to be included
        periods: [2081]         #list with start years of periods to be included
        time_avg: annualclim  #seasonal or annual means
        label: ["RCP2.6 2081-2100", "RCP4.5 2081-2100", "RCP6.0 2081-2100", "RCP8.5 2081-2100"]   # labels on top of each panel, loop is seasons, scenarios, periods
        # Optional attributes:
        #seasons: [2]  # list with seasons index if averagetime is "seasonalclim" (required for seasonalclim),  DJF:0, MAM:1, JJA:2, SON:3
        #iavmode:   # use IAV data from multi-model mean or include identical models to the ones plotted? default is mmm, otherwise set iavmode = "each" and make sure to have them in IAV_calc_pr
        #percent: 1 #0 or 1, difference in percent = 1, default = 0
      ch12_plot_map_diff_mmm_stipp_mrsos:
        <<: *mrsos_map_settings
        script: ipcc_ar5/ch12_plot_map_diff_mmm_stipp.ncl
        ancestors: ['mrsos', 'mrsos_change_mmm/ch12_calc_map_diff_mmm_mrsos']
        # Optional attributes:
        projection: Robinson   # map projection, any valid ncl projection, default Robinson
        diff_levs: [-2, -1.6, -1.2, -0.8, -0.4, 0, 0.4, 0.8, 1.2, 1.6, 2] # explicit levels for all contour plots
        max_vert: 2  # maximum number of plots in vertical
        max_hori: 2  # maximum number of plots in horizontal
        colormap: ./diag_scripts/shared/plot/rgb/ipcc_colors_red2blu_centered.rgb # use alternative colormap
        #span: # boolean to decide if span whole colormap (default = True)
        sig: True # plot stippling for significance?
        not_sig: True # plot hatching for uncertainty?
        #pltname: # an alternative name for the output plot, default is varname + time_avg
        model_nr: True # boolean, true if want number of models included in mmm to be printet in top right and precalculated
        #plotmask: ocean # apply a mask when plotting? either "None" (default), "ocean", "land"

  ###  Change scaled by global average temperature change ##
  tas_change_scaleT:
    description: Multi-model mean temperature change scaled by global T change map with significance
    themes:
      - phys
    realms:
      - atmos
    variables:
      tas:
        preprocessor: preproc_map
        project: CMIP5
        ensemble: r1i1p1
        mip: Amon
        field: T2Ms
    additional_datasets:
      - {dataset: CCSM4,            exp: historical, start_year: 1986, end_year: 2005}
      - {dataset: CESM1-CAM5,       exp: historical, start_year: 1986, end_year: 2005}
      - {dataset: GFDL-ESM2G,       exp: historical, start_year: 1986, end_year: 2005, ensemble: r1i1p1}
      - {dataset: IPSL-CM5A-LR,     exp: historical, start_year: 1986, end_year: 2005}
      - {dataset: IPSL-CM5A-MR,     exp: historical, start_year: 1986, end_year: 2005}
      - {dataset: MPI-ESM-LR,       exp: historical, start_year: 1986, end_year: 2005}
      - {dataset: MPI-ESM-MR,       exp: historical, start_year: 1986, end_year: 2005}

      - {dataset: GFDL-ESM2G,       exp: rcp26, start_year: 2081, end_year: 2100}
      - {dataset: MPI-ESM-LR,       exp: rcp26, start_year: 2081, end_year: 2100}

      - {dataset: IPSL-CM5A-LR,     exp: rcp26, start_year: 2181, end_year: 2200}
      - {dataset: MPI-ESM-LR,       exp: rcp26, start_year: 2181, end_year: 2200}

      - {dataset: GFDL-ESM2G,       exp: rcp45, start_year: 2081, end_year: 2100}
      - {dataset: IPSL-CM5A-LR,     exp: rcp45, start_year: 2081, end_year: 2100}
      - {dataset: MPI-ESM-LR,       exp: rcp45, start_year: 2081, end_year: 2100}

      - {dataset: IPSL-CM5A-MR,     exp: rcp45, start_year: 2181, end_year: 2200}
      - {dataset: MPI-ESM-LR,       exp: rcp45, start_year: 2181, end_year: 2200}

      - {dataset: GFDL-ESM2G,       exp: rcp60, start_year: 2081, end_year: 2100}
      - {dataset: IPSL-CM5A-LR,     exp: rcp60, start_year: 2081, end_year: 2100}
      - {dataset: IPSL-CM5A-MR,     exp: rcp60, start_year: 2081, end_year: 2100}

      - {dataset: CCSM4,            exp: rcp60, start_year: 2181, end_year: 2200}
      - {dataset: CESM1-CAM5,       exp: rcp60, start_year: 2181, end_year: 2200}

      - {dataset: GFDL-ESM2G,       exp: rcp85, start_year: 2081, end_year: 2100}
      - {dataset: IPSL-CM5A-LR,     exp: rcp85, start_year: 2081, end_year: 2100}
      - {dataset: IPSL-CM5A-MR,     exp: rcp85, start_year: 2081, end_year: 2100}
      - {dataset: MPI-ESM-LR,       exp: rcp85, start_year: 2081, end_year: 2100}
      - {dataset: MPI-ESM-MR,       exp: rcp85, start_year: 2081, end_year: 2100}

      - {dataset: CCSM4,            exp: rcp85, start_year: 2181, end_year: 2200}
      - {dataset: IPSL-CM5A-LR,     exp: rcp85, start_year: 2181, end_year: 2200}
      - {dataset: MPI-ESM-LR,       exp: rcp85, start_year: 2181, end_year: 2200}

    scripts:
      ch12_calc_map_diff_scaleT_tas: &tas_scale_settings
        script: ipcc_ar5/ch12_calc_map_diff_scaleT_mmm_stipp.ncl
        # Required attributes:
        scenarios: [rcp26, rcp45, rcp60, rcp85]      #list with scenarios to be included
        periods: [2081, 2181]         #list with start years of periods to be included
        time_avg: annualclim  #seasonal or annual means
        label: ["2081-2100", "2181-2200"]   # labels on top of each panel, loop to plot is seasons, periods
        # Optional attributes:
        #seasons: [0, 2]  # list with seasons index to be included if averagetime is "seasonalclim" (required),  DJF:0, MAM:1, JJA:2, SON:3
        #percent: # difference in percent? percent = 1, default = 0
      ch12_plot_map_diff_scaleT_tas:
        <<: *tas_scale_settings
        script: ipcc_ar5/ch12_plot_map_diff_mmm_stipp.ncl
        ancestors: ['tas', 'tas_change_scaleT/ch12_calc_map_diff_scaleT_tas']
        # Optional attributes:
        projection: Robinson   # map projection, any valid ncl projection
        sig: True # plot significance as stippling?
        diff_levs: [0, 0.25, 0.5, 0.75, 1, 1.25, 1.5, 1.75, 2] # use explicit levels for contour plot?
        colormap: ./diag_scripts/shared/plot/rgb/ipcc_temperature_with_grey.rgb # use alternative colormap
        #pltname: # an alternative name for the output plot, default is diagnostic + varname + time_avg
        #max_vert: 2  # maximum number of plots in vertical
        #max_hori: 2  # maximum number of plots in horizontal

#   pr_change_scaleT:
#     description: Multi-model mean precipitation change scaled by global tas change, map with significance
#     themes:
#       - phys
#     realms:
#       - atmos
#     variables:
#       pr:
#         preprocessor: preproc_map
#         project: CMIP5
#         mip: Amon
#         field: T2Ms
#         ensemble: r1i1p1
#       tas:
#         preprocessor: preproc_map
#         project: CMIP5
#         mip: Amon
#         field: T2Ms
#         ensemble: r1i1p1 
#     additional_datasets:
#       - {dataset: CanESM2,        exp: historical, start_year: 1986, end_year: 2005, ensemble: r1i1p1}
#       - {dataset: GFDL-ESM2G,     exp: historical, start_year: 1986, end_year: 2005}
#       - {dataset: MPI-ESM-LR,     exp: historical, start_year: 1986, end_year: 2005}

#       - {dataset: CSIRO-Mk3-6-0,  exp: rcp26, start_year: 2081, end_year: 2100}
#       - {dataset: GFDL-ESM2G,     exp: rcp26, start_year: 2081, end_year: 2100}
#       - {dataset: MPI-ESM-LR,     exp: rcp26, start_year: 2081, end_year: 2100}

#       - {dataset: CanESM2,        exp: rcp26, start_year: 2181, end_year: 2200}
#       - {dataset: CCSM4,          exp: rcp26, start_year: 2181, end_year: 2200}
#       - {dataset: MPI-ESM-LR,     exp: rcp26, start_year: 2181, end_year: 2200}

#       - {dataset: GFDL-ESM2G,     exp: rcp45, start_year: 2081, end_year: 2100}
#       - {dataset: MPI-ESM-LR,     exp: rcp45, start_year: 2081, end_year: 2100}

#       - {dataset: CanESM2,        exp: rcp45, start_year: 2181, end_year: 2200}
#       - {dataset: CCSM4,          exp: rcp45, start_year: 2181, end_year: 2200}
# #      - {dataset: CSIRO-Mk3-6-0,  exp: rcp45, start_year: 2181, end_year: 2200}
#       - {dataset: MPI-ESM-LR,     exp: rcp45, start_year: 2181, end_year: 2200}

#       - {dataset: CCSM4,          exp: rcp60, start_year: 2081, end_year: 2100}
# #      - {dataset: CSIRO-Mk3-6-0,  exp: rcp60, start_year: 2081, end_year: 2100}
#       - {dataset: GFDL-ESM2G,     exp: rcp60, start_year: 2081, end_year: 2100}

#       - {dataset: GFDL-ESM2G,     exp: rcp85, start_year: 2081, end_year: 2100}
#       - {dataset: MPI-ESM-LR,     exp: rcp85, start_year: 2081, end_year: 2100}

#       - {dataset: CCSM4,          exp: rcp85, start_year: 2181, end_year: 2200}
# #      - {dataset: CSIRO-Mk3-6-0,  exp: rcp85, start_year: 2181, end_year: 2200}
#       - {dataset: MPI-ESM-LR,     exp: rcp85, start_year: 2181, end_year: 2200}

#     scripts:
#       ch12_calc_map_diff_scaleT_pr: &pr_scale_settings
#         script: ipcc_ar5/ch12_calc_map_diff_scaleT_mmm_stipp.ncl
#         # Required attributes:
#         scenarios: [rcp45, rcp85]      #list with scenarios to be included
#         periods: [2081, 2181]         #list with start years of periods to be included
#         time_avg: annualclim  #seasonal or annual means
#         label: ["2081-2100", "2181-2200"]   # labels on top of each panel, loop to plot is seasons, periods
#         # Optional attributes:
#         #seasons: [0, 2]  # list with seasons index to be included if averagetime is "seasonalclim" (required),  DJF:0, MAM:1, JJA:2, SON:3
#         percent: 1 # difference in percent? percent = 1, default = 0
#       ch12_plot_map_diff_scaleT_pr:
#         <<: *pr_scale_settings
#         script: ipcc_ar5/ch12_plot_map_diff_mmm_stipp.ncl
#         ancestors: ['pr', 'pr_change_scaleT/ch12_calc_map_diff_scaleT_pr']
#         # Optional attributes:
#         projection: Robinson   # map projection, any valid ncl projection
#         sig: True # plot significance as stippling?
#         diff_levs: [-12, -9, -6, -3, 0, 3, 6, 9, 12] # use explicit levels for contour plot?
#         colormap: ./diag_scripts/shared/plot/rgb/ipcc-precip-delta.rgb # use alternative colormap
#         #pltname: # an alternative name for the output plot, default is diagnostic + varname + time_avg
#         #max_vert: 2  # maximum number of plots in vertical
#         #max_hori: 2  # maximum number of plots in horizontal

  ###  Northern Hemisphere relative snow cover change timeseries
  snw_line:
    description: Prepare snow area data for timeseries of multiple scenarios incl. spread and then plot
    themes:
      - phys
    realms:
      - land
    variables:
      snw:
        preprocessor: preprocessor_1
        project: CMIP5
        mip: LImon
        field: T2Ms
        ensemble: r1i1p1 
        fx_files: [sftlf, sftgif]

    additional_datasets:
      - {dataset: CanESM2,       exp: historical, start_year: 1980, end_year: 2005, ensemble: r1i1p1}
      - {dataset: CCSM4,         exp: historical, start_year: 1980, end_year: 2005}
      - {dataset: CESM1-CAM5,    exp: historical, start_year: 1980, end_year: 2005}
      - {dataset: CSIRO-Mk3-6-0, exp: historical, start_year: 1980, end_year: 2005}
      - {dataset: GFDL-CM3,      exp: historical, start_year: 1980, end_year: 2005}
      - {dataset: MPI-ESM-LR,    exp: historical, start_year: 1980, end_year: 2005}
      - {dataset: MPI-ESM-MR,    exp: historical, start_year: 1980, end_year: 2005}
      - {dataset: NorESM1-M,     exp: historical, start_year: 1980, end_year: 2005}

      - {dataset: CanESM2,       exp: rcp26, start_year: 2006, end_year: 2100}
      - {dataset: CCSM4,         exp: rcp26, start_year: 2006, end_year: 2100}
      - {dataset: CESM1-CAM5,    exp: rcp26, start_year: 2006, end_year: 2100}
      - {dataset: CSIRO-Mk3-6-0, exp: rcp26, start_year: 2006, end_year: 2100}
      - {dataset: GFDL-CM3,      exp: rcp26, start_year: 2006, end_year: 2100}
      - {dataset: MPI-ESM-LR,    exp: rcp26, start_year: 2006, end_year: 2100}
      - {dataset: MPI-ESM-MR,    exp: rcp26, start_year: 2006, end_year: 2100}

      - {dataset: CanESM2,       exp: rcp45, start_year: 2006, end_year: 2100}
      - {dataset: CCSM4,         exp: rcp45, start_year: 2006, end_year: 2100}
      - {dataset: CESM1-CAM5,    exp: rcp45, start_year: 2006, end_year: 2100}
      - {dataset: CSIRO-Mk3-6-0, exp: rcp45, start_year: 2006, end_year: 2100}
      - {dataset: GFDL-CM3,      exp: rcp45, start_year: 2006, end_year: 2100}
      - {dataset: MPI-ESM-LR,    exp: rcp45, start_year: 2006, end_year: 2100}
      - {dataset: MPI-ESM-MR,    exp: rcp45, start_year: 2006, end_year: 2100}

      - {dataset: CCSM4,         exp: rcp60, start_year: 2006, end_year: 2100}
      - {dataset: CESM1-CAM5,    exp: rcp60, start_year: 2006, end_year: 2100}
      - {dataset: CSIRO-Mk3-6-0, exp: rcp60, start_year: 2006, end_year: 2100}
      - {dataset: GFDL-CM3,      exp: rcp60, start_year: 2006, end_year: 2100}
      - {dataset: NorESM1-M,     exp: rcp60, start_year: 2006, end_year: 2100}

      - {dataset: CanESM2,       exp: rcp85, start_year: 2006, end_year: 2100}
      - {dataset: CCSM4,         exp: rcp85, start_year: 2006, end_year: 2100}
      - {dataset: CESM1-CAM5,    exp: rcp85, start_year: 2006, end_year: 2100}
      - {dataset: CSIRO-Mk3-6-0, exp: rcp85, start_year: 2006, end_year: 2100}
      - {dataset: GFDL-CM3,      exp: rcp85, start_year: 2006, end_year: 2100}
      - {dataset: MPI-ESM-LR,    exp: rcp85, start_year: 2006, end_year: 2100}
      - {dataset: MPI-ESM-MR,    exp: rcp85, start_year: 2006, end_year: 2100}

    scripts:
      ch12_calc_ts_snw_area_change: &ts_snw_settings
        # Required attributes:
        script: ipcc_ar5/ch12_snw_area_change_fig12-32.ncl
        styleset: CMIP5
        scenarios: [rcp26, rcp45, rcp60, rcp85] # which scenarios included in figure
        syears: [1980, 2006]      # start years in time periods (e.g. start of historical period and rcps)
        eyears: [2005, 2100]      # end years in time periods (end year of historical runs and rcps)
        begin_ref_year: 1986            # start year of reference period (e.g. 1986)
        end_ref_year: 2005              # end year of reference period (e.g 2005)
        months: MA            # which months included in analysis? e.g. for NH March + April
        label: [Historical, RCP2.6, RCP4.5, RCP6.0, RCP8.5] # labels to use in legend depending on scenarios
        # Optional attributes:
        title: "Relative snow cover extent change" # title in plot
        yaxis: "(-)"            # y-axis title 
        ymin: -0.4                        # minimim value on y-axis
        ymax: 0.2                        # maximum value on y-axis
        model_nr: True                 # boolean, save number of model runs per period and scenario in netcdf to print in plot?
        colormap: ./diag_scripts/shared/plot/rgb/ipcc_color_tseries.rgb  # choose file to create colormap from
        ts_minlat: 0   # minimum latitude if not global e.g(/0/)
        ts_maxlat: 90  # maximum latitude if not global e.g.(/90/)
        ts_minlon: 0   # minimum longitude if not global e.g.(/0/)
        ts_maxlon: 360 # maximum longitude if not global e.g.(/360/)
      ch12_plot_ts_line_snw_area_change:
        <<: *ts_snw_settings
        script: ipcc_ar5/ch12_plot_ts_line_mean_spread.ncl
        ancestors: ['snw', 'snw_line/ch12_calc_ts_snw_area_change']
