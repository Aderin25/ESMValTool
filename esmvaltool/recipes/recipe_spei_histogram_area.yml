
---
documentation:

  description: |
    Produce the histogram SPEI of few models

  authors:
    - berg_pe

  references:
    - acknow_project

  projects:
    - c3s-magic

datasets:
  # - {dataset: CRU, mip: Amon, project: OBS, type: reanaly, version: TS4.02,
  # start_year: 1950, end_year: 2000, tier: 2}
  - {dataset: ERA-Interim, project: OBS, type: reanaly,
     version: 1, start_year: 1979, end_year: 2014, tier: 3}
  - {dataset: MIROC6, institute: MIROC, mip: Amon,
     project: CMIP6, exp: historical, ensemble: r1i1p1f1,
     grid: gn, start_year: 1979, end_year: 2014}
  - {dataset: GFDL-CM4, institute: NOAA-GFDL, mip: Amon,
     project: CMIP6, exp: historical, ensemble: r1i1p1f1,
     grid: gr1, start_year: 1979, end_year: 2014}
  - {dataset: IPSL-CM6A-LR, institute: IPSL, mip: Amon,
     project: CMIP6, exp: historical, ensemble: r1i1p1f1,
     grid: gr, start_year: 1979, end_year: 2014}
  - {dataset: MRI-ESM2-0, institute: MRI, mip: Amon,
     project: CMIP6, exp: historical, ensemble: r1i1p1f1,
     grid: gn, start_year: 1979, end_year: 2014}
  - {dataset: CNRM-ESM2-1, institute: CNRM-CERFACS, mip: Amon,
     project: CMIP6, exp: historical, ensemble: r1i1p1f2,
     grid: gr, start_year: 1979, end_year: 2014}
  - {dataset: CNRM-CM6-1, institute: CNRM-CERFACS, mip: Amon,
     project: CMIP6, exp: historical, ensemble: r1i1p1f2, 
     grid: gr, start_year: 1979, end_year: 2014}
  - {dataset: BCC-CSM2-MR, institute: BCC, mip: Amon,
     project: CMIP6, exp: historical, ensemble: r1i1p1f1,
     grid: gn, start_year: 1979, end_year: 2014}

preprocessors:
  preprocessor1:
    regrid:
      target_grid: reference_dataset
      scheme: linear
    # extract_region:
    #   start_latitude: -30
    #   end_latitude: 60
    #   start_longitude: 0
    #   end_longitude: 360

diagnostics:
  diagnostic1:
    description: Calculating SPI index
    variables:
      pr:
        reference_dataset: ERA-Interim
        preprocessor: preprocessor1
        field: T2Ms
      tas:
        reference_dataset: ERA-Interim
        preprocessor: preprocessor1
        field: T2Ms
    scripts:
      script1:
        script: droughtindex/diag_spei_sixmonths.r
