---

datasets:
#  - {dataset: ERA-Interim,  project: CMIP5,  mip: 6hrPlev, exp: historical,   start_year: 1979,  end_year: 2000}
  - {dataset: CanESM2,  project: CMIP5,  mip: 6hrPlev, exp: historical,  ensemble: r4i1p1, start_year: 2003,  end_year: 2003}

preprocessors:

  preprocessor1:
    extract_time:
      start_month: 4
      start_day:   1
      end_month:   1
      end_day:     7
#      end_year:    2003
#    regrid:
#      target_grid: 0.75x0.75
#      scheme: linear

  preprocessor2:
    extract_time:
      start_month: 4
      start_day:   1
      end_month:   1
      end_day:     7
#      end_year:    2003
    extract_levels:
      levels: 85000
      scheme: nearest
#    regrid:
#      target_grid: 0.75x0.75
#      scheme: linear

#  preprocessorERAi:
#    extract_time:
#      start_month: 1
#      start_day:   1
#      start_year:  1979
#      end_month:   12
#      end_day:     31
#      end_year:    2000

diagnostics:

  surge_estimator:
    description: Storm surge estimator using sea level pressure and components of 10m wind.
    variables:
      psl:
        preprocessor: preprocessor1
        field: T2D
      va: #should be vas!
        preprocessor: preprocessor2
        field: T3D
      ua: #should be uas!
        preprocessor: preprocessor2
        field: T3D
    scripts:
      surge_height:
        script: surge_height/diagnostic.py
        coastal_map:       true
        t0:                2003-04-01
        plt_tseries:       false
        stations:          all
        plt_stations:      ['hoekvanh']
        colormap:          RdYlBu_r 
        map_projection:    Plate.Carree()
        resolution:        intermediate
        fout_name:         surge_height
        perf_regres:       False
        path2eraint:       /usr/people/ridder/nobackup/ECMWF/ERAintWAQUA/speed/1979-2016/
